<div class="border-card mb-5">
  <div class="d-flex">
    <div class="li-left">
      <h5>Work Experiences</h5>
    </div>
    {{#if allowEdit}}
      <div class="li-right">
        <button class="button-solid button-orange" {{action 'getNewWorkExperience'}}>Add New +</button>
      </div>
    {{/if}}
  </div>
  <div class="divider-h my-4"></div>

  <div class="list-divided border-none">
    {{#if workExperiences.length}}
    {{#each workExperiences as |workExperience|}}
      <div class="py-4">
        <div class="d-flex justify-content-between">
          <div>
            <h5>
              {{workExperience.title}} 
              <span class="tag red card-md">
                {{if (eq workExperience.type 'intern') "Intern" "Full Time"}}
              </span>
            </h5>
          </div>
          {{#if allowEdit}}
            <button class="orange" {{action 'setEditingRecord' workExperience}}>
              <i class="fas fa-edit"></i>Edit
            </button>
          {{/if}}
        </div>
        <div>{{workExperience.subtitle}}</div>
        <div class="dark-grey">
          {{moment-format (unix workExperience.startDate) 'YYYY'}} - 
          {{#if workExperience.isCurrent}}
            Current
          {{else}}
            {{moment-format (unix workExperience.endDate) 'YYYY'}}
          {{/if}}
        </div>
        <p>
          {{workExperience.description}}
        </p>
      </div>
    {{/each}}
    {{else}}
      No Work Experience Added
    {{/if}}

  </div>
</div>

{{#if (and allowEdit showEditModal)}}
  {{#modal-dialog
    onClose=(action (mut showEditModal) false)
    targetAttachment="center"
    translucentOverlay=true
    containerClass='centered-scrolling-container w-50'
    overlayClass='centered-scrolling-overlay'
    wrapperClass='centered-scrolling-wrapper'
  }}
    <div class="p-5">
      <h4 class="mb-5">Add Work Experience</h4>

      <div class="mb-4">  
        <div class="font-sm">Title</div>
        <Input class="input-text" @type="text" @value={{editingRecord.title}}/>
      </div>
      
      <div class="mb-4">
        <div class="font-sm">Subtitle</div>
        <Input class="input-text" @type="text" @value={{editingRecord.subtitle}} />
      </div>
      
    
      <div class="row mb-4">
        <div class="col-12 col-md-6">
          <div class="font-sm">Start Date</div>
          <PikadayInput class="input-text" 
            @value={{editingRecord.startDateString}}
            @onSelection={{action (mut editingRecord.startDateString)}} />
        </div>
        <div class="col-12 col-md-6">
          {{#unless editingRecord.isCurrent}}
            <div class="font-sm">End Date</div>
            <PikadayInput class="input-text" 
              @value={{editingRecord.endDateString}}
              @onSelection={{action (mut editingRecord.endDateString)}} />
          {{/unless}}
        </div>
      </div>
      <div class="mb-4">
        <Input @type="checkbox" @checked={{editingRecord.isCurrent}} />
        <span>Currently Working</span>
      </div>

      <div class="mb-4">
        <input name="type" 
          type="radio" 
          checked={{eq editingRecord.type "intern"}}
          onclick={{action (mut editingRecord.type) "intern"}} />
          Intern
        <input name="type" 
          type="radio" 
          checked={{eq editingRecord.type "fulltime"}}
          onclick={{action (mut editingRecord.type) "fulltime"}} />
          Full Time
      </div>

      <div class="mb-4">
        <div class="font-sm">Location</div>
        <Input @type="text" class="input-text" @value={{editingRecord.location}} />
      </div>
    
      <div class="mb-4">
        <div class="font-sm">
          Description (if any)
        </div>
        <Textarea class="input-textarea w-100" @value={{editingRecord.description}} @rows="7" />
        </div>
    
      <div class="d-flex">
        <div class="li-left">
          <button class="red" {{action 'deleteRecord'}}>
            <i class="fas fa-trash pr-3"></i>Delete
          </button>
        </div>
        <div class="li-right">
          <button class="button-dashed button-orange mr-3" {{action (mut showEditModal) false}}>Cancel</button>
          <button class="button-solid button-orange" {{action (perform saveRecordTask)}}>Save Details</button>
        </div>
      </div>
      {{#if error}}
        {{!-- <div class="red">
          {{error}}
        </div> --}}
      {{/if}}
    </div>
  {{/modal-dialog}}
{{/if}}